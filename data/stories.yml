version: "2.0"

stories:

- story: finish flow
  steps:
  - checkpoint: check_flow_finished
  - action: utter_any_questions
  - intent: deny
  - action: utter_conclusion
  - action: utter_feel_free_come_back

- story: bot_initiative_full with no std established starting by bot start
  steps:
  - or: 
    - intent: advance_plot
#    - intent: definition_STD
#  - action: validate_std_name
  - action: utter_definition_STD
  - action: utter_shall_i_continue
  - or: 
    - intent: affirm
#    - intent: prevention_STD
    - intent: advance_plot
#  - action: validate_std_name
  - action: utter_prevention_STD 
  - action: utter_shall_i_continue
  - or: 
    - intent: affirm
    - intent: testing_recommendations
    - intent: advance_plot
  - action: utter_testing_recommendations 
  - checkpoint: check_flow_finished

- story: bot_initiative_full with no std established starting by expression of amusement
  steps:
  - or: 
    - intent: express_amusement
    - intent: affirm
  - action: utter_shall_i_continue
  - or: 
    - intent: affirm
    - intent: advance_plot
  - action: validate_std_name
  - action: action_specific_definition #utter_definition_STD
  - action: utter_shall_i_continue
  - or: 
    - intent: affirm
    - intent: advance_plot
  - action: validate_std_name
  - action:  action_specific_prevention #utter_prevention_STD 
  - action: utter_shall_i_continue
  - or: 
    - intent: affirm
    - intent: advance_plot
    - intent: testing_recommendations
  - action: utter_testing_recommendations 
  - checkpoint: check_flow_finished

- story: interruption #bot_initiative_stopped1
  steps:
#  - intent: advance_plot
#  - action: validate_std_name
#  - action: utter_definition_STD
  - action: utter_shall_i_continue
  - intent: deny
  - checkpoint: check_flow_finished


- story: user has a specific question
  steps:
  - action: utter_any_questions
  - or:
    - intent: affirm
    - intent: I_have_questions
    # TO DO: MAYBE CREATE TWO: ONE ESTABLISHING THE ENTITY, OTHER ONE IGNORING IT?
#  - action: validate_std_name
  - action: utter_feel_free_to_ask

- story: user starts by saying they have questions, establish an std, but want bot initiative
  steps:
  - intent: I_have_questions
    entities:
    - STD_name 
  - action: utter_feel_free_to_ask
  - intent: advance_plot # TO DO: include entity establishment?
  - action: validate_std_name
  - action: action_specific_definition # utter_definition_STD 
  - action: utter_shall_i_continue
  - or: 
    - intent: affirm
    - intent: advance_plot
  - action: validate_std_name
  - action: action_specific_transmission  
  - action: utter_shall_i_continue
  - or: 
    - intent: affirm
    - intent: advance_plot
  - action: validate_std_name
  - action: action_specific_prevention #utter_prevention_STD 
  - checkpoint: check_flow_finished


- story: thanking story 
  steps:
  - intent: thank 
  - action: utter_thank_response

# - story: bot_initiative_stopped2
#   steps:
#   # - intent: greet
#   # - action: utter_greet
#   # - action: utter_intro
#   - intent: advance_plot
#   - action: validate_std_name
#   - action: utter_definition_STD
#   - action: utter_shall_i_continue
#   - intent: deny
#   - action: utter_any_questions
#   - or:
#     - intent: affirm
#     - intent: I_have_questions
#   - action: validate_std_name
#   - action: utter_feel_free_to_ask


# - story: bot_initiative_stopped3
#   steps:
#   # - intent: greet
#   # - action: utter_greet
#   # - action: utter_intro
#   - intent: advance_plot
#   - action: validate_std_name
#   - action: utter_definition_STD
#   - action: utter_shall_i_continue
#   - intent: affirm
#   - action: validate_std_name
#   - action: utter_transmission_STD
#   - action: utter_shall_i_continue
#   - intent: deny
#   - action: utter_any_questions
#   - or:
#     - intent: affirm
#     - intent: I_have_questions
#   - action: validate_std_name
#   - action: utter_feel_free_to_ask

# - story: respond_to_second_greeting
#   steps:
#   - intent: greet
#   - action: utter_greet
#   - action: utter_intro
#   - intent: greet
#   - action: utter_greet
#   - action: utter_how_can_i_help
  # TO DO: CHECK HOW TO CARRY ON FROM HERE, OR IF IT ALREADY UNDERSTANDS THAT IT SHOULD CARRY ON

  #- intent: affirm
  #- action: utter_feel_free_to_ask

# - story: mixed_initiative
#   steps:
#   # - intent: greet
#   # - action: utter_greet
#   # - action: utter_intro
#   - intent: I_have_questions
#   - action: validate_std_name
#   - action: utter_feel_free_to_ask
#   - intent: transmission_STD
#   - action: validate_std_name
#   - action: action_specific_transmission  
#   - action: action_set_entity_none
# #  - action: utter_any_questions
#   - intent: ask_source
#   - action: utter_source
#   - action: utter_find_more_info
# #  - action: utter_any_questions
#   - intent: advance_plot 
#   - action: utter_definition_STD 
#   - action: utter_shall_i_continue
#   - intent: affirm
#   - action: validate_std_name
#   - action: utter_prevention_STD 
#   - action: utter_shall_i_continue
#   - intent: affirm
#   - action: utter_testing_recommendations 
#   - checkpoint: check_flow_finished
#   # - action: utter_any_questions
#   # - intent: deny
#   # - action: utter_conclusion
#   # - action: utter_feel_free_come_back
#   # - action: utter_source
#   # - action: utter_additionally_cant_answer
#   # - action: utter_find_more_info
#   # - action: utter_it_was_a_pleasure
#   # - action: utter_goodbye

#########################################################################################
#########################################################################################
#########################################################################################
#########################################################################################
#########################################################################################
#########################################################################################



### STORIES THAT HAVE GONE WRONG, GOING BACK TO OLD MODEL BUT LEAVING THIS HERE COMMENTED SO I DON'T FEEL IT WAS ALL USELESS

# version: "2.0"

# stories:

# # BEGINNING OF FLOW

# - story: begin with bot initiative start - no stds
#   steps:
#   - intent: greet
#   - action: utter_greet
#   - action: utter_intro
#   - or:
#     - intent: advance_plot
#     - intent: definition_STD
#   - checkpoint: start_flow_with_no_STD_established

# # - story: begin with bot initiative start - specific std
# #   steps:
# #   - intent: greet
# #   - action: utter_greet
# #   - action: utter_intro
# #   - or:
# #     - intent: advance_plot
# #       entities:
# #       - STD_name
# #     - intent: definition_STD
# #       entities:
# #       - STD_name
# #   - checkpoint: start_flow_with_specific_STD

# - story: begin with express amusement - no stds 
#   steps:
#   - intent: greet
#   - action: utter_greet
#   - action: utter_intro
#   - or:
#     - intent: express_amusement
#     - intent: affirm
#   - action: utter_shall_i_continue
#   - or:
#     - intent: affirm
#     - intent: definition_STD
#   - checkpoint: start_flow_with_no_STD_established

# # - story: begin with express amusement - specific std
# #   steps:
# #   - intent: greet
# #   - action: utter_greet
# #   - action: utter_intro
# #   - or:
# #     - intent: express_amusement
# #     - intent: affirm
# #   - action: utter_shall_i_continue
# #   - or:
# #     - intent: affirm
# #       entities:
# #       - STD_name
# #     - intent: definition_STD
# #       entities:
# #       - STD_name
# #   - checkpoint: start_flow_with_specific_STD

# - story: begin with user has questions - no stds
#   steps:
#   - intent: I_have_questions
#   - action: utter_feel_free_to_ask
#   - or: 
#     - intent: advance_plot 
#     - intent: definition_STD
#   - checkpoint: start_flow_with_no_STD_established

# # - story: begin with user has questions, establish an std, but want bot initiative
# #   steps:
# #   - intent: I_have_questions
# #     entities:
# #     - STD_name 
# # #  - action: validate_std_name
# #   - action: utter_feel_free_to_ask
# #   - or: 
# #     - intent: advance_plot 
# #     - intent: definition_STD
# #   - checkpoint: start_flow_with_specific_STD

# # HAPPY PATH WITH BOT INITIATIVE - CORE

# - story: bot initiative full with no std established
#   steps:
#   - checkpoint: start_flow_with_no_STD_established
#   - action: validate_std_name
#   - action: action_specific_definition
#   - action: action_set_entity_none # CHANGE IT?
#     # entities:
#     # - STD_name: null
#   - or:
#     - intent: affirm
#     - intent: thank 
#     - intent: express_amusement
#     - intent: advance_plot
#   - action: utter_shall_i_continue
#   - or:
#     - intent: affirm
#     - intent: prevention_STD
#     - intent: advance_plot
#   - action: validate_std_name
#   - action: action_specific_prevention
#   - action: action_set_entity_none
#     # entities:
#     # - STD_name: null
#   - action: utter_shall_i_continue
#   - or:
#     - intent: affirm
#     - intent: testing_recommendations
#     - intent: advance_plot
#   - action: utter_testing_recommendations 
# #  - checkpoint: check_flow_finished
#   - action: utter_any_questions
#   - intent: deny
#   - action: utter_conclusion
#   - action: utter_feel_free_come_back
#   - or:
#     - intent: goodbye
#     - intent: thank 
#     - intent: affirm

# ##

# # - story: bot initiative full with an std established
# #   steps:
# #   - checkpoint: start_flow_with_specific_STD
# #   - action: validate_std_name
# #   - action: action_specific_definition
# # #  - action: action_set_entity_none # CHANGE IT?
# #   - or:
# #     - intent: affirm
# #     - intent: thank 
# #     - intent: express_amusement
# #     - intent: advance_plot
# #   - action: utter_shall_i_continue
# #   - or:
# #     - intent: affirm
# #     - intent: transmission_STD
# #     - intent: advance_plot
# #   - action: validate_std_name
# #   - action: action_specific_transmission
# # #  - action: action_set_entity_none
# #   - action: utter_shall_i_continue
# #   - or:
# #     - intent: affirm
# #     - intent: prevention_STD
# #     - intent: advance_plot
# #   - action: validate_std_name
# #   - action: action_specific_prevention
# # #  - action: action_set_entity_none
# # #  - checkpoint: check_flow_finished
# #   - action: utter_any_questions
# #   - intent: deny
# #   - action: utter_conclusion
# #   - action: utter_feel_free_come_back
# #   - or:
# #     - intent: goodbye
# #     - intent: thank 
# #     - intent: affirm

# ###

# - story: interruption
#   steps:
#   - action: utter_shall_i_continue
#   - intent: deny 
#   - action: utter_any_questions
#   - intent: deny
#   - action: utter_conclusion
#   - action: utter_feel_free_come_back
#   - or:
#     - intent: goodbye
#     - intent: thank 
#     - intent: affirm
#   #- checkpoint: check_flow_finished

# # FINISHING FLOW

# # - story: finish flow
# #   steps:
# #   - checkpoint: check_flow_finished
# #   - action: utter_any_questions
# #   - intent: deny
# #   - action: utter_conclusion
# #   - action: utter_feel_free_come_back
# #   - or:
# #     - intent: goodbye
# #     - intent: thank 
# #     - intent: affirm



# # - story: pick up from a deviation from story asking if the user would like to hear bot flow
# #   steps:
# #   - action: utter_any_questions
# #   - intent: deny
# #   - action: utter_would_like_to_begin_flow
# #   - or:
# #     - intent: advance_plot
# #     - intent: affirm
# #   - checkpoint: start_flow_with_no_STD_established



# - story: Respond to thank you # with questions
#   steps:
#   - intent: thank 
#   - action: utter_thank_response
# #  - action: utter_any_questions

# - story: user has questions - when user answers positively
#   steps:
#   - action: utter_any_questions
#   - or:
#     - intent: affirm
#     - intent: I_have_questions
#     # intent: thank# TO DO: CHANGE TO SPECIFIC ACTION
#     # TO DO: MAYBE CREATE TWO: ONE ESTABLISHING THE ENTITY, OTHER ONE IGNORING IT?
# #  - action: validate_std_name
#   - action: utter_feel_free_to_ask



# # - story: pick up from a deviation from story with asking if the user has questions 
# #   steps: 
# #   - or:
# #     - intent: thank 
# #     - intent: affirm 
# #     - intent: express_amusement
# #   - action: utter_any_questions


# # - story: thanking story # with questions
# #   steps:
# #   - intent: thank 
# #   - action: utter_thank_response
#   # - action: utter_any_questions
#   # - or:
#   #   - intent: affirm 
#   #   - intent: I_have_questions
#   # - action: utter_feel_free_to_ask

# # - story: thanking story without questions
# #   steps:
# #   - intent: thank 
# #   - action: utter_thank_response
# #   - checkpoint: check_flow_finished

#   # - action: utter_definition_STD 
#   # - action: utter_shall_i_continue
#   # - intent: affirm
#   # - action: validate_std_name
#   # - action: action_specific_transmission  
#   # - action: utter_shall_i_continue
#   # - intent: affirm
#   # - action: validate_std_name
#   # - action: action_specific_prevention #utter_prevention_STD
#   # - checkpoint: check_flow_finished



# # - story: bot_initiative_full with no std established starting by expression of amusement
# #   steps:
# #   - intent: express_amusement
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: utter_definition_STD
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: utter_prevention_STD 
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: utter_testing_recommendations 
# #   - checkpoint: check_flow_finished

# # story starts with questions ?

# # - story: bot_initiative_stopped1
# #   steps:
# #   - intent: advance_plot
# #   - action: utter_definition_STD
# #   - action: utter_shall_i_continue
# #   - intent: deny
# #   - checkpoint: check_flow_finished

# # - story: bot_initiative_stopped2
# #   steps:
# #   # - intent: greet
# #   # - action: utter_greet
# #   # - action: utter_intro
# #   - intent: advance_plot
# #   - action: validate_std_name
# #   - action: utter_definition_STD
# #   - action: utter_shall_i_continue
# #   - intent: deny
# #   - action: utter_any_questions
# #   - or:
# #     - intent: affirm
# #     - intent: I_have_questions
# #   - action: validate_std_name
# #   - action: utter_feel_free_to_ask



# # - story: bot_initiative_stopped3
# #   steps:
# #   # - intent: greet
# #   # - action: utter_greet
# #   # - action: utter_intro
# #   - intent: advance_plot
# #   - action: validate_std_name
# #   - action: utter_definition_STD
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: validate_std_name
# #   - action: utter_transmission_STD
# #   - action: utter_shall_i_continue
# #   - intent: deny
# #   - action: utter_any_questions
# #   - or:
# #     - intent: affirm
# #     - intent: I_have_questions
# #   - action: validate_std_name
# #   - action: utter_feel_free_to_ask

# # - story: respond_to_second_greeting
# #   steps:
# #   - intent: greet
# #   - action: utter_greet
# #   - action: utter_intro
# #   - intent: greet
# #   - action: utter_greet
# #   - action: utter_how_can_i_help
#   # TO DO: CHECK HOW TO CARRY ON FROM HERE, OR IF IT ALREADY UNDERSTANDS THAT IT SHOULD CARRY ON

#   #- intent: affirm
#   #- action: utter_feel_free_to_ask



# # - story: user stops bot initiative flow to ask definition which was what the bot was going to say
# #   steps:
# #   - intent: express_amusement
# #   - action: utter_shall_i_continue
# #   - intent: definition_STD
# #   - action: validate_std_name
# #   - action: action_specific_definition
# #   - action: action_set_entity_none
# #   - entities:
# #     - STD_name: null
# #   - or:
# #     - intent: affirm
# #     - intent: thank
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: utter_prevention_STD 
# #   - action: utter_shall_i_continue
# #   - or:
# #     - intent: affirm
# #     - intent: thank
# #   - action: utter_testing_recommendations
# #   - checkpoint: check_flow_finished

# # - story: user stops bot initiative flow to ask prevention which was what the bot was going to say
# #   steps:
# #   - intent: express_amusement
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: utter_definition_STD
# #   - action: utter_shall_i_continue
# #   - intent: prevention_STD
# #   - action: validate_std_name
# #   - action: action_specific_prevention
# #   - action: action_set_entity_none
# #   - entities:
# #     - STD_name: null
# #   - or:
# #     - intent: affirm
# #     - intent: thank
# #   - action: utter_testing_recommendations
# #   - checkpoint: check_flow_finished

# # - story: user stops bot initiative flow to ask testing recommendations which was what the bot was going to say
# #   steps:
# #   - intent: advance_plot
# #   - action: utter_definition_STD # TO DO: CHANGE TO SPECIFIC ACTION
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: utter_prevention_STD  # TO DO: CHANGE TO SPECIFIC ACTION
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - intent: testing_recommendations
# #   - action: utter_testing_recommendations
# #   - checkpoint: check_flow_finished


# # - story: mixed_initiative
# #   steps:
# #   # - intent: greet
# #   # - action: utter_greet
# #   # - action: utter_intro
# #   - intent: I_have_questions
# #   - action: validate_std_name
# #   - action: utter_feel_free_to_ask
# #   - intent: transmission_STD
# #   - action: validate_std_name
# #   - action: action_specific_transmission  
# #   - action: action_set_entity_none
# # #  - action: utter_any_questions
# #   - intent: ask_source
# #   - action: utter_source
# #   - action: utter_find_more_info
# # #  - action: utter_any_questions
# #   - intent: advance_plot 
# #   - action: utter_definition_STD 
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: validate_std_name
# #   - action: utter_prevention_STD 
# #   - action: utter_shall_i_continue
# #   - intent: affirm
# #   - action: utter_testing_recommendations 
# #   - checkpoint: check_flow_finished
# #   # - action: utter_any_questions
# #   # - intent: deny
# #   # - action: utter_conclusion
# #   # - action: utter_feel_free_come_back
# #   # - action: utter_source
# #   # - action: utter_additionally_cant_answer
# #   # - action: utter_find_more_info
# #   # - action: utter_it_was_a_pleasure
# #   # - action: utter_goodbye

